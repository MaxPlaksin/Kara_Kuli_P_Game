# Game Flow Visualizer

Визуализатор сюжетной схемы (клиент + сервер на Vite).

## Запуск

```bash
# Установка (один раз). Если есть pnpm:
pnpm install

# Если pnpm нет — через npm:
npm install --legacy-peer-deps

# Запуск dev-сервера
npm run dev
```

Приложение откроется по адресу: **http://localhost:3000/**

## Сохранение данных

Все изменения (узлы, текст, комментарии, связи, позиции) **автоматически сохраняются** на сервер через 1,5 сек после правок. При открытии приложения схема подгружается с сервера.

- **В dev** (`npm run dev`): данные пишутся в папку `data/flow.json` в корне проекта.
- **В проде**: соберите проект (`npm run build`), запустите сервер (`npm start`). Данные сохраняются в `data/flow.json` (можно задать папку через переменную окружения `DATA_DIR`).

Папку `data/` добавьте в `.gitignore`, если не хотите коммитить пользовательские схемы.

## Деплой на сервер

```bash
npm run build
npm start
```

Переменные: `PORT` (порт, по умолчанию 3000), `DATA_DIR` (путь к папке для `flow.json`). Сервер раздаёт статику и API `/api/flow` (GET — загрузка, PUT — сохранение).

## Отдельно от проекта helper

Проект лежит в папке `game-flow-visualizer/` и не пересекается с файлами схемы игры (build_scheme_html.py, game_scheme_full.html и т.д.) в корне helper. Зависимости — только в `game-flow-visualizer/node_modules/`.
